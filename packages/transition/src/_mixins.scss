////
/// @group transition
////

@import '@react-md/theme/dist/helpers';
@import 'variables';
@import 'functions';

/// Creates the styles for one of the transition's theme values. This is mostly
/// going to be an internal helper mixin util.
///
/// @param {String} property - The property to set a `rmd-transition-theme-values` value to.
/// @param {String} theme-style - One of the keys of `rmd-transition-theme-values` to extract a value from.
/// @param {String|Color|Number} fallback [null] - A fallback value to use if the css variable
///   isn't set somehow. This will default to automatically retrieving the default value
///   from the `rmd-transition-theme-values` map when `null`.
@mixin rmd-transition-theme($property, $theme-style, $fallback: null) {
  @include rmd-theme-apply-rmd-var(
    $property,
    $theme-style,
    $rmd-transition-theme-values,
    transition
  );
}

/// Updates one of the transition's theme variables with the new value for the section
/// of your app.
///
/// @param {String} theme-style - The transition theme style type to update. This should be one
///   of the `$rmd-transition-theme-values` keys.
/// @param {String|Number|Color} - The new value to use.
@mixin rmd-transition-set-theme-var($style, $value) {
  @include rmd-theme-update-rmd-var($value, $theme-style, $rmd-transition-theme-values, transition);
}

/// Adds a transition timing function for the provided transition type.
///
/// @param {String} type - The transition type that should be used. This should be one of the
///   keys for `$rmd-transitions`
/// @param {Boolean} animation - Boolean if this should be applied to the animation timing
///   function instead of the transition timing function.
@mixin rmd-transition($type, $animation: false) {
  @include rmd-transition-theme(
    if($animation, animation-timing-function, transition-timing-function),
    $type
  );
}

/// Creates the styles for the Collapse component within react-md
@mixin rmd-collapse {
  .rmd-collapse {
    transition-property: max-height, padding-bottom, padding-top;
    will-change: max-height, padding-bottom, padding-top;

    &--no-overflow {
      overflow: hidden;
    }

    &--enter {
      @include rmd-transition($rmd-collapse-enter-transition-func);
    }

    &--leave {
      @include rmd-transition($rmd-collapse-leave-transition-func);
    }
  }
}

/// Creates the cross fade animation styles. This animation is usually used
/// when loading in new parts of a page or page transitions as there is no
/// exit animation by default.
@mixin rmd-cross-fade {
  .rmd-cross-fade {
    opacity: 0;
    transform: translateY($rmd-cross-fade-translate-distance);

    &--active {
      @include rmd-transition(deceleration);

      opacity: 1;
      transform: translateY(0);
      transition-duration: $rmd-cross-fade-transition-duration;
      transition-property: opacity, transform;
    }
  }
}

/// Creates the transition theme css variables as well as the styles
/// for components in the transition package.
@mixin react-md-transition {
  @include rmd-theme-create-root-theme($rmd-transition-theme-values, transition);

  @include rmd-collapse;
  @include rmd-cross-fade;
}
